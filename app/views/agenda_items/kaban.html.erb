<% content_for :title, "Agenda items" %>

<% content_for :collection_body do %>
  <%
    grouped_agenda_items = @agenda_items.group_by(&:status)
  %>
  <%= tag.div class: [ "grid", "grid-cols-#{AgendaItem.statuses.count}", "gap-2" ] do %>
    <% AgendaItem.statuses.keys.each do |status| %>
      <div class="flex flex-col gap-1 bg-base-200">
        <div class="mb-4">
          <%= agenda_status_tag_for_status status %>
        </div>
        <div class="flex flex-col gap-3">
          <% grouped_agenda_items[status]&.each do |agenda_item| %>
            <div>
              <%= link_to agenda_item, data: { turbo: false } do %>
                <%= render agenda_item %>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  <% end %>
<% end %>

<%= render "agenda_items/collection", selected_mode: :kaban %>
