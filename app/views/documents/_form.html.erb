<div data-controller="form-loader">
  <svg viewBox="0 0 24 24" class="w-6 h-6" stroke="currentColor" fill="none" stroke-width="1.5">
    <path data-form-loader-target="icon" style="transform-origin: 12px 12px" stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" />
  </svg>

  <%= form_with(model: document, class: "contents flex flex-col gap-4 ", data: {
      controller: "form-submit", "action": "turbo:submit-start->form-loader#onSubmitStart turbo:submit-end->form-loader#onSubmitEnd"
    }) do |form| %>

    <div class ="stats overflow-hidden">
      <div class="stat">
        <span class="stat-value"><%= form.text_field :title, autocomplete: "off", placeholder: "The title of the document",
          data: { action: "input->form-submit#onInput" } %></span>
        <span class="stat-desc"><%= form.text_area :description, autocomplete: "off", rows: 2, placeholder: "Document description",
          class: "w-full", data: { action: "input->form-submit#onInput" } %></span>
      </div>
    </div>

    <%= form.submit hidden: true, data: { "form-submit-target" => "submitButton" } %>
  <% end %>

  <% if content_for? :attributes_form %>
    <div class="divider"></div>
    <%= yield :attributes_form %>
    <div class="divider"></div>
  <% end %>

  <%= form_with(model: document, local: true, class: "contents", data: {
      controller: "document-editor form-submit", "document-editor-editable-value": "true",
      action: "turbo:submit-start->form-loader#onSubmitStart turbo:submit-end->form-loader#onSubmitEnd document-editor:update->form-submit#onInput",
    }) do |form| %>

    <%= form.hidden_field :content, data: { "document-editor-target" => "content" } %>

    <div>
      <div class="organizer-editor" data-document-editor-target="editor"></div>
    </div>

    <%= form.submit hidden: true, data: { "form-submit-target" => "submitButton", "document-editor-target" => "submitButton" } %>
  <% end %>
</div>
